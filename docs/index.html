<!doctype html>
<html class="default no-js">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Spawnmon</title>
	<meta name="description" content="Documentation for Spawnmon">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="assets/css/main.css">
	<script async src="assets/js/search.js" id="search-script"></script>
</head>
<body>
<header>
	<div class="tsd-page-toolbar">
		<div class="container">
			<div class="table-wrap">
				<div class="table-cell" id="tsd-search" data-index="assets/js/search.json" data-base=".">
					<div class="field">
						<label for="tsd-search-field" class="tsd-widget search no-caption">Search</label>
						<input id="tsd-search-field" type="text" />
					</div>
					<ul class="results">
						<li class="state loading">Preparing search index...</li>
						<li class="state failure">The search index is not available</li>
					</ul>
					<a href="index.html" class="title">Spawnmon</a>
				</div>
				<div class="table-cell" id="tsd-widgets">
					<div id="tsd-filter">
						<a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a>
						<div class="tsd-filter-group">
							<div class="tsd-select" id="tsd-filter-visibility">
								<span class="tsd-select-label">All</span>
								<ul class="tsd-select-list">
									<li data-value="public">Public</li>
									<li data-value="protected">Public/Protected</li>
									<li data-value="private" class="selected">All</li>
								</ul>
							</div>
							<input type="checkbox" id="tsd-filter-inherited" checked />
							<label class="tsd-widget" for="tsd-filter-inherited">Inherited</label>
							<input type="checkbox" id="tsd-filter-externals" checked />
							<label class="tsd-widget" for="tsd-filter-externals">Externals</label>
						</div>
					</div>
					<a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a>
				</div>
			</div>
		</div>
	</div>
	<div class="tsd-page-title">
		<div class="container">
			<h1>Spawnmon</h1>
		</div>
	</div>
</header>
<div class="container container-main">
	<div class="row">
		<div class="col-8 col-content">
			<div class="tsd-panel tsd-typography">
				<a href="#spawnmon" id="spawnmon" style="color: inherit; text-decoration: none;">
					<h1>Spawnmon</h1>
				</a>
				<p>Similar to <a href="https://www.npmjs.com/package/concurrently">concurrently</a> or <a href="https://www.npmjs.com/package/npm-run-all">npm-run-all</a> but with a few tweaks to make life easier. In particular when a watch stream is idle you can easily run another command or custom callback.</p>
				<p>Also built in helpers for pinging a socket ensuring it&#39;s live and then firing off another event. This is useful if you want to use Create React App and then fire off a command to connect Electron after it detects CRA is live.</p>
				<a href="#using-cli" id="using-cli" style="color: inherit; text-decoration: none;">
					<h2>Using CLI</h2>
				</a>
				<p>Using the CLI is pretty straight forward and likely similar to what you&#39;ve used in the past. Take note of the examples and help.</p>
				<a href="#show-help" id="show-help" style="color: inherit; text-decoration: none;">
					<h4>Show Help</h4>
				</a>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon -h</span>
</code></pre>
				<a href="#show-examples" id="show-examples" style="color: inherit; text-decoration: none;">
					<h4>Show Examples</h4>
				</a>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon --examples</span>
</code></pre>
				<a href="#using-from-command-line" id="using-from-command-line" style="color: inherit; text-decoration: none;">
					<h3>Using From Command Line</h3>
				</a>
				<p>Commands to be run by Spawnmon should be grouped in single or double quotes with options typically prior to commands.</p>
				<p>The following will run rollup then watch for changes and also spin up Create React App.</p>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon </span><span style="color: #A31515">&#039;rollup -c -w&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;react-scripts start&#039;</span>
</code></pre>
				<a href="#changing-the-prefix" id="changing-the-prefix" style="color: inherit; text-decoration: none;">
					<h4>Changing the Prefix</h4>
				</a>
				<p>By default each process is preceded by the index of the spawned command e.g. <strong>[0]</strong> then <strong>[1]</strong> for the second spawned command. This can be changed by setting the <strong>&quot;prefix&quot;</strong> option.</p>
				<p>The following will change from displaying the index to displaying the command being run.</p>
				<p>It&#39;s important to note that when using [ or ] in your template you must wrap in quotes.</p>
				<p>Internally spawnmon will replace <strong>{index|command|pid|timestamp}</strong> with the corresponding value. </p>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon --prefix </span><span style="color: #A31515">&#039;[{command}]&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;rollup -c -w&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;react-scripts start&#039;</span>
</code></pre>
				<a href="#advanced-features" id="advanced-features" style="color: inherit; text-decoration: none;">
					<h3>Advanced Features</h3>
				</a>
				<p>Spawnmon can run another command after the previous becomes idle or can use the internal socket connection helper to fire a command after a successfully connected ping.</p>
				<a href="#running-command-after-socket-connection" id="running-command-after-socket-connection" style="color: inherit; text-decoration: none;">
					<h4>Running Command after Socket Connection</h4>
				</a>
				<p>In the below example <strong>&quot;electron&quot;</strong> will only be added to Spawnmon as a runnable command but will not immediatelly be spawned. </p>
				<p>The format here is <strong>parent-command:child-command:host:port</strong>. By default the host and port are set as below so you do not need to provide those if you are for example pinging create react app.</p>
				<p>Once Create React App or react-scripts runs it will start pinging. When the socket establishes a connection it will fire up <strong>electron</strong>.</p>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon --on-pinger react-scripts:electron:127.0.0.1:3000 </span><span style="color: #A31515">&#039;electron .&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;rollup -c -w&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;react-scripts start&#039;</span>
</code></pre>
				<a href="#running-command-after-parent-is-idle" id="running-command-after-parent-is-idle" style="color: inherit; text-decoration: none;">
					<h4>Running Command after Parent is Idle</h4>
				</a>
				<p>This is not a perfect science as you need some sort of success or idle condition to be sent from the spawned parent. In order to simplify this and not have to create elaborate success conditions the simple timer assumes when the spawned process quits emitting or writing output and it eclipses an interval without changing that it is in idle. Not perfect but works well in many cases. </p>
				<p>If using this feature programmatically you have much more control over the success or idle condition.</p>
				<p>The below will output &quot;rollup done!&quot; once <strong>rollup</strong> is idle and watching for changes.</p>
				<pre><code class="language-sh"><span style="color: #000000">$ spawnmon --on-timer rollup:echo </span><span style="color: #A31515">&#039;echo rollup done!&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;rollup -c -w&#039;</span><span style="color: #000000"> </span><span style="color: #A31515">&#039;react-scripts start&#039;</span>
</code></pre>
				<a href="#programmatic-usage" id="programmatic-usage" style="color: inherit; text-decoration: none;">
					<h2>Programmatic Usage</h2>
				</a>
				<p>As time permits there is much more Spawnmon can do. Here are the basis. However the docs are very detailed, every method has clear comments and typings. You should be able to figure it out in the
				meantime.</p>
				<pre><code class="language-js"><span style="color: #0000FF">const</span><span style="color: #000000"> { </span><span style="color: #0070C1">Spawnmon</span><span style="color: #000000">, </span><span style="color: #0070C1">Pinger</span><span style="color: #000000"> } = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;spawnmon&#039;</span><span style="color: #000000">);</span>

<span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">sm</span><span style="color: #000000"> = </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Spawnmon</span><span style="color: #000000">();</span>

<span style="color: #008000">// Use &quot;create&quot; here without adding to the runnable group.</span>
<span style="color: #008000">// &quot;add&quot; will create the command and add to group.</span>
<span style="color: #001080">sm</span><span style="color: #000000">.</span><span style="color: #795E26">create</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;electron&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;.&#039;</span><span style="color: #000000">);</span>

<span style="color: #001080">sm</span><span style="color: #000000">.</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;rollup&#039;</span><span style="color: #000000">, [</span><span style="color: #A31515">&#039;-c&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;-w&#039;</span><span style="color: #000000">]});</span>

<span style="color: #001080">sm</span><span style="color: #000000">.</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;react-app-rewired&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;start&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">  .</span><span style="color: #795E26">setPinger</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span>
<span style="color: #000000">    </span><span style="color: #008000">// maybe launch electron???</span>
<span style="color: #000000">  });</span>

<span style="color: #008000">// OR</span>

<span style="color: #008000">// This is the same as above but it will call</span>
<span style="color: #008000">// and run the above &quot;electron&quot; command we</span>
<span style="color: #008000">// initialized with &quot;create&quot;.</span>
<span style="color: #001080">sm</span><span style="color: #000000">.</span><span style="color: #795E26">add</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;react-app-rewired&#039;</span><span style="color: #000000">, </span><span style="color: #A31515">&#039;start&#039;</span><span style="color: #000000">)</span>
<span style="color: #000000">  .</span><span style="color: #795E26">setPinger</span><span style="color: #000000">(</span><span style="color: #A31515">&#039;electron&#039;</span><span style="color: #000000">);</span>

<span style="color: #008000">// Again by using &quot;create&quot; for electron only</span>
<span style="color: #008000">// the rollup and react-app-rewired will run here.</span>
<span style="color: #001080">sm</span><span style="color: #000000">.</span><span style="color: #795E26">run</span><span style="color: #000000">();</span>
</code></pre>
				<a href="#why-another-concurrently-or-run-all" id="why-another-concurrently-or-run-all" style="color: inherit; text-decoration: none;">
					<h2>Why Another Concurrently or Run-All?</h2>
				</a>
				<p>Main reason was to have something a little more focused on API use, solid Typescript typings and be able to easily run things after watch streams go stale or become idle. </p>
				<p>Other than that not a ton to be honest, in fact most of these task runners work about the same really. </p>
				<p>With a little luck, in the end the API for programmatic use might end up hair better.</p>
				<a href="#docs" id="docs" style="color: inherit; text-decoration: none;">
					<h2>Docs</h2>
				</a>
				<p>See <a href="https://blujedis.github.io/spawnmon/">https://blujedis.github.io/spawnmon/</a></p>
				<a href="#change" id="change" style="color: inherit; text-decoration: none;">
					<h2>Change</h2>
				</a>
				<p>See <a href="CHANGE.md">CHANGE.md</a></p>
				<a href="#license" id="license" style="color: inherit; text-decoration: none;">
					<h2>License</h2>
				</a>
				<p>See <a href="LICENSE">LICENSE.md</a></p>
			</div>
		</div>
		<div class="col-4 col-menu menu-sticky-wrap menu-highlight">
			<nav class="tsd-navigation primary">
				<ul>
					<li class=" ">
						<a href="modules.html">Exports</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli.html">cli</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli_api.html">cli/api</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli_borders.html">cli/borders</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli_help.html">cli/help</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli_table.html">cli/table</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/cli_utils.html">cli/utils</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/command.html">command</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/index.html">index</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/pinger.html">pinger</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/spawnmon.html">spawnmon</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/timer.html">timer</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/types.html">types</a>
					</li>
					<li class=" tsd-kind-module">
						<a href="modules/utils.html">utils</a>
					</li>
				</ul>
			</nav>
			<nav class="tsd-navigation secondary menu-sticky">
				<ul class="before-current">
				</ul>
			</nav>
		</div>
	</div>
</div>
<footer class="with-border-bottom">
	<div class="container">
		<h2>Legend</h2>
		<div class="tsd-legend-group">
			<ul class="tsd-legend">
				<li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li>
				<li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li>
				<li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li>
				<li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li>
				<li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li>
				<li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li>
			</ul>
			<ul class="tsd-legend">
				<li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li>
			</ul>
		</div>
	</div>
</footer>
<div class="container tsd-generator">
	<p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p>
</div>
<div class="overlay"></div>
<script src="assets/js/main.js"></script>
</body>
</html>